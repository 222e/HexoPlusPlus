function hpp_del(t){var e=ajaxObject();e.open("post","/hpp/admin/api/deltalk",!0),e.setRequestHeader("Content-Type","text/plain"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&swal("已删除！",{icon:"success",buttons:{yes:"是"}}).then((t=>{window.location.reload()}))},e.send(t)}function getCookie(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?unescape(e[2]):null}function hpp_loadmore(t,e,n){new hpp_talk({id:t,domain:e,limit:n,start:Number(getCookie("hpp_start"))})}function hpp_talk({id:t,domain:e,limit:n,start:a}){function s(t){var e=0;for(var n in t)e++;return e}console.log(t),document.getElementById(t).innerHTML='<div class="hpp_talk_load">\n  <div></div>\n  <div></div>\n  <div></div>\n  <div></div>\n</div>',back="https://"+e+"/hpp/api/gethpptalk";var i=ajaxObject();i.open("post",back,!0),i.setRequestHeader("Content-Type","text/plain"),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){document.getElementById(t).innerHTML=`<div class="streamline b-l m-l-lg m-b padder-v">\n   <ol id="hpp_talk_list"></ol> \n   <button onclick="hpp_loadmore('${t}','${e}',${n})" style="\twidth: 270px;\n\theight: 40px;\n\tborder-width: 0px; \n\tborder-radius: 3px; \n\tbackground: #90939920; \n\tcursor: pointer; \n\toutline: none;\n\tfont-family: Microsoft YaHei;\n\tfont-size: 17px; \n\tmargin: .2rem auto 0;\n    display: block;">下一页</button>\n  </div>`,console.log("OK"),console.log(i.responseText);let o=JSON.parse(i.responseText);document.getElementById("hpp_talk_list").innerHTML="";for(var a=0;a<s(o);a++){if(null==o[a]){document.cookie="hpp_start=0";break}let t=JSON.parse(o[a]),e=marked(t.content);document.getElementById("hpp_talk_list").innerHTML+=`<div id="${t.id}" class="comment-body comment-parent comment-odd comment-by-user"> <div id="item">\n     <a class="pull-left thumb-sm avatar m-l-n-md"> <img nogallery="" src="${t.avatar}" class="img-40px photo img-square normal-shadow"> </a> \n     <div class="time-machine m-l-lg panel box-shadow-wrap-normal"> \n      <div class="panel-heading pos-rlt b-b b-light">\n       <span class="text-muted m-l-sm pull-right" datetime="${t.time}"><strong class="talk_mobile_hide">  ${t.name}·</strong>${t.time}</span> \n      </div> \n      <div class="panel-body comment-content-true"> \n       <p>${e}</p> \n      </div> \n      <div class="panel-footer"> \n       <div class="say_footer">\n<a href="javascript:hpp_del(${t.id});"><svg t="1611833138243" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2021" width="20" height="20"><path d="M832.192 296.96c0.768 10.112 1.28 20.288 1.28 30.656l0 506.112c0 83.264-41.664 158.208-130.432 158.208L311.552 991.936c-88.704 0-130.368-74.944-130.368-158.208L181.184 327.616c0-10.304 0.768-20.544 1.984-30.656l-67.2 0L115.968 170.432l195.648-0.128L311.616 145.92c0-56.32 53.44-102.08 119.36-102.08l152.832 0c65.92 0 119.232 45.76 119.232 102.08l0 23.552 195.712 0.832L898.752 296.96 832.192 296.96 832.192 296.96zM637.76 145.92c0-21.056-24.64-38.784-54.016-38.784L430.912 107.136c-29.312 0-54.08 17.792-54.08 38.784l0 24.32 260.928 0L637.76 145.92 637.76 145.92zM768.192 327.616c0-10.56-0.704-20.8-2.112-30.656L248.512 296.96C247.168 306.816 246.4 317.12 246.4 327.616l0 506.112c0 48.512 12.48 94.976 65.152 94.976l391.488 0c52.864 0 65.216-46.528 65.216-94.976L768.256 327.616 768.192 327.616zM311.552 865.664 311.552 359.936l65.28 0 0 505.728L311.552 865.664 311.552 865.664zM474.688 865.664 474.688 359.936l65.152 0 0 505.728L474.688 865.664 474.688 865.664zM637.76 865.664 637.76 359.936l65.28 0 0 505.728L637.76 865.664 637.76 865.664z" p-id="2022" fill="#1296db"></path></svg></a>\t   \n\t   </div> \n      </div> \n     </div> \n    </div>`}}else console.log("ERROR")};let o={limit:n,start:a};a+=n,document.cookie="hpp_start="+a,i.send(JSON.stringify(o))}(()=>{class t{constructor(t){const e={logo:"OwO表情",container:document.getElementsByClassName("OwO")[0],position:"down",width:"100%",maxHeight:"250px",api:"https://api.anotherhome.net/OwO/OwO.json"};for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);this.container=t.container,"up"===t.position&&this.container.classList.add("OwO-up");const n=new XMLHttpRequest;n.onreadystatechange=()=>{4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?(this.odata=JSON.parse(n.responseText),this.init(t)):console.log("OwO data request was unsuccessful: "+n.status))},n.open("get",t.api,!0),n.send(null)}init(t){this.packages=Object.keys(this.odata);let e=`\n            <div class="OwO-logo"><span>${t.logo}</span></div>\n            <div class="OwO-body" style="width: ${t.width}">`;for(let n=0;n<this.packages.length;n++){e+=`\n                <ul class="OwO-items OwO-items-${this.odata[this.packages[n]].type}" style="max-height: ${parseInt(t.maxHeight)-53+"px"};">`;let a=this.odata[this.packages[n]].container;for(let t=0;t<a.length;t++)e+=`\n                    <li class="OwO-item" title="${a[t].text}">${a[t].icon}</li>`;e+="\n                </ul>"}e+='\n                <div class="OwO-bar">\n                    <ul class="OwO-packages">';for(let t=0;t<this.packages.length;t++)e+=`\n                        <li><span>${this.packages[t]}</span></li>`;e+="\n                    </ul>\n                </div>\n            </div>\n            ",this.container.innerHTML=e,this.logo=this.container.getElementsByClassName("OwO-logo")[0],this.logo.addEventListener("click",(()=>{this.toggle()})),this.container.getElementsByClassName("OwO-body")[0].addEventListener("click",(t=>{let e=null;t.target.classList.contains("OwO-item")?e=t.target:t.target.parentNode.classList.contains("OwO-item")&&(e=t.target.parentNode),e&&hpp_add_mark(e.innerHTML)})),this.packagesEle=this.container.getElementsByClassName("OwO-packages")[0];for(let t=0;t<this.packagesEle.children.length;t++)(e=>{this.packagesEle.children[t].addEventListener("click",(()=>{this.tab(e)}))})(t);this.tab(0)}toggle(){this.container.classList.contains("OwO-open")?this.container.classList.remove("OwO-open"):this.container.classList.add("OwO-open")}tab(t){const e=this.container.getElementsByClassName("OwO-items-show")[0];e&&e.classList.remove("OwO-items-show"),this.container.getElementsByClassName("OwO-items")[t].classList.add("OwO-items-show");const n=this.container.getElementsByClassName("OwO-package-active")[0];n&&n.classList.remove("OwO-package-active"),this.packagesEle.getElementsByTagName("li")[t].classList.add("OwO-package-active")}}"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.OwO=t})();var OwO_demo=new OwO({logo:"OωO表情",container:document.getElementsByClassName("OwO")[0],api:hpp_OwO,position:"down",maxHeight:"250px"});function base64Encode(t){var e;return e=encodeURIComponent(t),e=unescape(e),e=window.btoa(e)}function hpp_replace_mark(t,e){void 0===t&&(t=""),$((function(){editormd("md-editor",{width:"100%",markdown:t,placeholder:"",toolbarIcons:function(){return["undo","redo","|","preview","watch","|","upimage"]},toolbarIconsClass:{upimage:"fa-image"},toolbarHandlers:{upimage:function(){$("#input").click()}},atLink:!1,emailLink:!1,height:440,path:"https://cdn.jsdelivr.net/npm/editor.md/lib/",htmlDecode:!0,saveHTMLToTextarea:!0})}))}function hpp_add_mark(t){void 0===t&&(t=""),$((function(){editormd("md-editor",{width:"100%",markdown:document.getElementById("doc_editor").value+"\n"+t,placeholder:"",toolbarIcons:function(){return["undo","redo","|","preview","watch","|","upimage"]},toolbarIconsClass:{upimage:"fa-image"},toolbarHandlers:{upimage:function(){$("#input").click()}},atLink:!1,emailLink:!1,height:440,path:"https://cdn.jsdelivr.net/npm/editor.md/lib/",htmlDecode:!0,saveHTMLToTextarea:!0})}))}document.cookie="hpp_start=";var input=document.getElementById("input");function readFile(){var t=this.files[0],e=t.name.substring(t.name.lastIndexOf(".")+1),n=new FileReader;n.readAsDataURL(t),n.onloadstart=function(t){},n.onprogress=function(t){},n.onload=function(t){hpp_uploadimage(this.result.substring(this.result.indexOf(",")+1),e)},n.onloadend=function(t){}}function hpp_uploadimage(t,e){var n=ajaxObject();n.open("post","/hpp/admin/api/addimage/"+e,!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?sweetAlert("成功","图片已更新","success"):201==n.status?(hpp_add_mark(`![](${n.responseText})`),sweetAlert("成功","图片已上传","success")):sweetAlert("糟糕","上传图片失败!","error"))},n.send(t)}function hpp_upload_md(){let t=document.getElementById("doc_editor").value,e=new Date,n={time:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes(),content:t,avatar:avatar,name:username};n=JSON.stringify(n);var a=ajaxObject();a.open("post","/hpp/admin/api/addtalk",!0),a.setRequestHeader("Content-Type","text/plain"),a.onreadystatechange=function(){4==a.readyState&&(200==a.status?swal("成功上传说说",{icon:"success",buttons:{yes:"是"}}).then((t=>{window.location.reload()})):(sweetAlert("糟糕","上传说说失败!","error"),mdeditor.disabled=!1))},a.send(n)}input.addEventListener("change",readFile,!1),new hpp_talk({id:"hpp_talk",domain:window.location.host,limit:10,start:0}),hpp_replace_mark();